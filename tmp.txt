import React from "react";
import { authService, dbService } from "../fbase";
import { collection, addDoc } from "firebase/firestore";

// The user object has basic properties such as display name, email, etc.

const EditProfile = () => {
    const user = authService.currentUser;

    const ChangeUserName = (event) => {
        const { target: {value} } = event;
        user.username = value;
    };

    const ChangeUserPhoneNumber = (event) => {
        const { target: {value} } = event;
        user.userphonenumber = value;
    };

    const ChangePassword = (event) => {
        if (password !== password2) {
            setError("비밀번호가 일치하지 않습니다.");
            return;
        } else {
        const { target: {value} } = event;
        password = value;
    }
    };

    const onSubmit = async (event) => {
        event.preventDefault();
        try {
            const docRef = await addDoc(collection(dbService, "userInfomation"), {
                name: username,
                text: userphonenumber,
                createdAt: Date.now(), });
            setUsername("");
            console.log("Document written with ID: ", docRef.id);
        } catch (error) {
            console.error("Error adding document: ", error);
        }
    };

    return (
        <div>
            <form onSubmit = {onSubmit}>
                <input value = {username} name= "usersname" type = "name" placeholder = {user.username} maxLength = {15} onChange = {ChangeUserName}/> <br/>
                <input value = {userphonenumber} name="usersphonenumber" type = "tel" placeholder = {user.userphonenumber} maxLength = {11} onChange = {ChangeUserPhoneNumber} /> <br/>
                <input type="submit" value = {"저 장"} /><br/>
            </form>
            <form>
                <input type = "password" placeholder = " 비밀번호 " onChange = {ChangePassword} required/> <br/>
            </form>
        </div>
    );
};

export default EditProfile;